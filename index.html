<!DOCTYPE html>
<html lang="nb">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="description" content="Realtidskart over buss, T-bane, trikk, tog og båt i Stor-Oslo. Se hvor kjøretøyene er og følg rutene på kartet.">
  <meta name="theme-color" content="#1a1a1a" id="theme-color-meta">
  <title>livetrafikk.no – Realtidskart kollektivtransport</title>
  <script>
    (function(){
      var s = localStorage.getItem('ruterlive-theme') || 'system';
      var d = s === 'system' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : s;
      document.documentElement.dataset.theme = d;
    })();
  </script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div id="app">
    <header>
      <h1>livetrafikk.no</h1>
    </header>

    <main id="map-container">
      <div id="stop-search-wrap" class="stop-search-wrap">
        <label for="stop-search-input" class="visually-hidden">Søk etter holdeplass</label>
        <input type="search" id="stop-search-input" class="stop-search-input" placeholder="Søk holdeplass…" autocomplete="off" aria-autocomplete="list" aria-controls="stop-search-results">
        <ul id="stop-search-results" class="stop-search-results" role="listbox" aria-label="Søkeresultater" hidden></ul>
      </div>
      <aside id="layers-panel">
        <div class="panel-header">
          <h2 class="panel-title">Lagvelger</h2>
          <button type="button" class="panel-toggle" id="panel-toggle" title="Minimer/utvid" aria-label="Minimer panel" aria-expanded="true">−</button>
        </div>
        <div class="panel-body">
        <div class="theme-select-wrap">
          <select id="theme-select" aria-label="Lys, mørk eller system">
            <option value="light">Lys</option>
            <option value="dark">Mørk</option>
            <option value="system" selected>System</option>
          </select>
        </div>
        <div class="layer-controls">
          <span class="layer-row">
            <label><span class="layer-color-dot bus" aria-hidden="true"></span><input type="checkbox" data-mode="bus" checked> Buss</label>
            <button type="button" class="info-btn" data-info="bus" title="Mer info" aria-label="Mer info om Buss">ⓘ</button>
          </span>
          <label><span class="layer-color-dot flybuss" aria-hidden="true"></span><input type="checkbox" data-mode="flybuss" checked> Flybuss</label>
          <span class="layer-row">
            <label><span class="layer-color-dot metro" aria-hidden="true"></span><input type="checkbox" data-mode="metro" checked> T-bane</label>
            <button type="button" class="info-btn" data-info="metro" title="Mer info" aria-label="Mer info om T-bane">ⓘ</button>
          </span>
          <span class="layer-row">
            <label><span class="layer-color-dot tram" aria-hidden="true"></span><input type="checkbox" data-mode="tram" checked> Trikk</label>
            <button type="button" class="info-btn" data-info="tram" title="Mer info" aria-label="Mer info om Trikk">ⓘ</button>
          </span>
          <label><span class="layer-color-dot water" aria-hidden="true"></span><input type="checkbox" data-mode="water" checked> Båt</label>
          <span class="layer-row">
            <label><span class="layer-color-dot rail" aria-hidden="true"></span><input type="checkbox" data-mode="rail" checked> Regiontog</label>
          </span>
          <span class="layer-row">
            <label><span class="layer-color-dot flytog" aria-hidden="true"></span><input type="checkbox" data-mode="flytog" checked> Flytoget</label>
          </span>
        </div>
        <label class="routes-toggle"><input type="checkbox" id="routes-toggle" checked> Rutelinjer</label>
        <div id="vehicle-count">Henter kjøretøy og rutelinjer fra Entur…</div>
        </div>
      </aside>
      <div id="info-overlay" class="overlay hidden" aria-hidden="true">
        <div class="overlay-content">
          <h3>Om datakilden</h3>
          <p id="info-text"></p>
          <button type="button" class="overlay-close">Lukk</button>
        </div>
      </div>
    </main>

    <footer id="ad-footer" class="ad-footer">
      <!-- Google AdSense: Legg inn data-ad-slot fra din annonseenhet i AdSense-dashboard -->
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1298230222793785" crossorigin="anonymous"></script>
      <ins class="adsbygoogle"
           style="display:block"
           data-ad-client="ca-pub-1298230222793785"
           data-ad-slot="XXXXXXXXXX"
           data-ad-format="auto"
           data-full-width-responsive="true"></ins>
      <script>
        (window.adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </footer>
  </div>

  <script type="module" src="/js/main.js"></script>
</body>
</html>
